import{q as d,v as j,r as n,j as e}from"./app-CPOEIljs.js";import{C as g,a as D,b as f,c as E,d as b}from"./card-Bgh2vyw6.js";import{B as R}from"./button-eEqjswbG.js";import{I as O}from"./input-DblQC-rj.js";import{L as U}from"./label-DOv-fn02.js";import{A as w,a as B}from"./alert-B7Y1C_SH.js";import{A as v,a as y,b as M,c as P,d as K,e as F,f as k}from"./alert-dialog-CT-B0vup.js";import{L as V}from"./loader-circle-ChjTYIog.js";import{C as Y}from"./circle-check-CubFW-9P.js";import"./utils-BM_CldAA.js";import"./index-B2vZC__5.js";import"./index-B7zntmxJ.js";import"./index-Cz6_P-h8.js";import"./index-ChuBIvQJ.js";import"./createLucideIcon-qc0XlodV.js";function oe(){const{props:p}=d(),{resources:r}=p,{data:t,setData:N,post:L,processing:l,errors:c,reset:h}=j({INITIAL_CPU:r.INITIAL_CPU||"",INITIAL_MEMORY:r.INITIAL_MEMORY||"",INITIAL_DISK:r.INITIAL_DISK||"",INITIAL_SERVERS:r.INITIAL_SERVERS||"",INITIAL_DATABASES:r.INITIAL_DATABASES||"",INITIAL_BACKUPS:r.INITIAL_BACKUPS||"",INITIAL_ALLOCATIONS:r.INITIAL_ALLOCATIONS||""}),{flash:I}=d().props,[o,m]=n.useState(null),[x,A]=n.useState(!1);n.useEffect(()=>{if(I.status)if(m({message:I.res,type:I.status}),I.status==="success resources")A(!0);else{const s=setTimeout(()=>m(null),5e3);return()=>clearTimeout(s)}},[I]);const T=async s=>{s.preventDefault();try{await L("/admin/api/ups")}catch{console.error("An error occurred while submitting the form.")}},u=()=>{A(!1),h()},a=(s,i,S,C="text")=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:s,children:i}),e.jsx(O,{id:s,type:C,value:S,onChange:_=>N(s,_.target.value),placeholder:`Enter ${i.toLowerCase()}`,className:c[s]?"border-red-500":""}),c[s]&&e.jsx("p",{className:"text-xs text-red-500",children:c[s]})]});return e.jsxs(e.Fragment,{children:[e.jsxs(g,{className:"w-full max-w-4xl mx-auto",children:[e.jsxs(D,{children:[e.jsx(f,{children:"Update Initial Resources"}),e.jsx(E,{children:"Update the initial resources for the system"})]}),e.jsxs(b,{children:[o&&o.type!=="success"&&e.jsx(w,{variant:"destructive",className:"mb-6",children:e.jsx(B,{children:o.message})}),e.jsxs("form",{onSubmit:T,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a("INITIAL_CPU","CPU",t.INITIAL_CPU,"number"),a("INITIAL_MEMORY","Memory",t.INITIAL_MEMORY,"number"),a("INITIAL_DISK","Disk",t.INITIAL_DISK,"number"),a("INITIAL_SERVERS","Servers",t.INITIAL_SERVERS,"number"),a("INITIAL_DATABASES","Databases",t.INITIAL_DATABASES,"number"),a("INITIAL_BACKUPS","Backups",t.INITIAL_BACKUPS,"number"),a("INITIAL_ALLOCATIONS","Allocations",t.INITIAL_ALLOCATIONS,"number")]}),e.jsx(R,{type:"submit",className:"w-full",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Resources"})]})]})]}),e.jsx(v,{open:x,onOpenChange:u,children:e.jsxs(y,{className:"max-w-md",children:[e.jsxs(M,{children:[e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-6 w-6 text-green-500"}),"Success!"]}),e.jsx(K,{className:"text-base",children:(o==null?void 0:o.message)||"Resources have been successfully updated!"})]}),e.jsx(F,{children:e.jsx(k,{onClick:u,children:"Continue"})})]})})]})}export{oe as default};
