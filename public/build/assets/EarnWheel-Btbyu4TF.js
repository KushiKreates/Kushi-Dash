import{r as t,b as l,j as e}from"./app-CPOEIljs.js";const u=[{id:1,name:"10 Coins",type:"coins",amount:10},{id:2,name:"50 Coins",type:"coins",amount:50},{id:3,name:"100 Coins",type:"coins",amount:100},{id:4,name:"500 Coins",type:"coins",amount:500},{id:5,name:"1000 Coins",type:"coins",amount:1e3},{id:6,name:"Special Item",type:"item",item:"Golden Ticket"}],j=()=>{const[o,r]=t.useState(0),[s,c]=t.useState(!1),[d,p]=t.useState(null),[m,a]=t.useState("");t.useEffect(()=>{h()},[]);const h=async()=>{try{const n=await l.get("/api/user/balance");r(n.data.balance)}catch(n){console.error("Failed to fetch balance:",n),a("Unable to fetch balance.")}},x=async()=>{if(!s){if(o<10){a("You need at least 10 coins to spin.");return}a(""),c(!0),p(null);try{await l.post("/api/user/spend",{amount:10}),r(n=>n-10),setTimeout(()=>{const n=Math.floor(Math.random()*u.length),i=u[n];p(i),l.post("/api/user/award",{prize:i}),i.type==="coins"&&r(b=>b+i.amount),c(!1)},3e3)}catch(n){console.error("Spin failed:",n),a("An error occurred. Please try again."),c(!1)}}};return e.jsxs("div",{className:"wheelin-container",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Wheel'in ðŸŽ¡"}),e.jsxs("p",{className:"mb-2",children:["Your Coins: ",e.jsx("strong",{children:o})]}),m&&e.jsx("p",{className:"text-red-500",children:m}),e.jsx("button",{onClick:x,disabled:s||o<10,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:s?"Spinning...":"Spin the Wheel (10 Coins)"}),s&&e.jsx("div",{className:"wheel mt-6",children:e.jsx("p",{children:"The wheel is spinning..."})}),d&&!s&&e.jsxs("div",{className:"prize-result mt-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Congratulations!"}),e.jsxs("p",{children:["You won: ",e.jsx("strong",{children:d.name})]})]})]})};export{j as default};
