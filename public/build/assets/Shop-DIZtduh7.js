import{q as L,v as R,r as m,j as e,U as V}from"./app-CPOEIljs.js";import{C as B,a as E,d as H}from"./card-Bgh2vyw6.js";import{B as P}from"./button-eEqjswbG.js";import{I as z}from"./input-DblQC-rj.js";import{S as F}from"./slider-B8CbEBZi.js";import"./select-DO_Wo6w3.js";import{L as b}from"./label-DOv-fn02.js";import{A as U,a as $,b as K,c as Q,d as X,e as Y,f as G}from"./alert-dialog-CT-B0vup.js";import{C as v}from"./coins-DmG8PAZj.js";import{X as J}from"./x-K1isOsV0.js";import{C as W}from"./circle-check-big-CmwaXFOD.js";import{S as Z,M as _}from"./server-AaV7efXc.js";import{C as ee,H as se}from"./hard-drive-BUx-wii7.js";import{c as u}from"./createLucideIcon-qc0XlodV.js";import"./utils-BM_CldAA.js";import"./index-B2vZC__5.js";import"./index-J1yvMNNS.js";import"./floating-ui.dom-Ds7Fmnq9.js";import"./index-CZqrbxx3.js";import"./index-Cz6_P-h8.js";import"./react-icons.esm-CK1D20Wk.js";import"./index-B7zntmxJ.js";import"./index-ChuBIvQJ.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=u("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=u("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=u("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);function Se(){const{auth:N,shop:i,flash:c}=L().props,{data:r,setData:h,post:k,processing:x,errors:o}=R({resource:"",quantity:1}),[C,d]=m.useState(!1),[w,A]=m.useState(""),[D,j]=m.useState("");m.useEffect(()=>{c.status&&(A(c.status),c.status.toLowerCase().includes("error")?j("error"):c.status.toLowerCase().includes("success")&&j("success"),d(!0))},[c]);const l={infrastructure:[{name:"servers",icon:Z}],performance:[{name:"cpu",icon:ee},{name:"memory",icon:_}],storage:[{name:"disk",icon:se},{name:"backups",icon:re}],networking:[{name:"allocations",icon:te}],database:[{name:"databases",icon:ae}]},y={cpu:"CPU",memory:"Memory",disk:"Disk",backups:"Backups",servers:"Servers",databases:"Databases",allocations:"Allocations"},n=s=>{var a;return!((a=i.prices[s])!=null&&a.enabled)},S=s=>{var a;return(a=i.prices[s])!=null&&a.enabled?"":"Currently unavailable"},f=(s,a)=>{h(s,a)},q=s=>{h("quantity",s[0])},M=s=>{s.preventDefault(),k("/shop/purchase")},O=(s,a)=>!s||!i.prices[s]?0:i.prices[s].cost*a,T=(s,a)=>!s||!i.prices[s]?0:i.prices[s].amount*a;return e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-1 mt-3",children:[e.jsxs(B,{className:"max-w-full",children:[e.jsxs(E,{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Shop"}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4"}),"Available Coins: ",N.user.coins]}),e.jsx("p",{className:"text-sm text-red-500 font-bold",children:"You cannot refund any purchases made in the shop."})]}),e.jsx(H,{children:e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{children:"Select Resource"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(l).map(([s,a])=>e.jsx(V.Fragment,{children:a.map(t=>e.jsxs("div",{className:`
                                                    p-3 border rounded-lg cursor-pointer transition-all
                                                    ${r.resource===t.name?"border-primary bg-primary/10":"border-border"}
                                                    ${n(t.name)?"opacity-50 cursor-not-allowed":"hover:border-primary"}
                                                `,onClick:()=>!n(t.name)&&f("resource",t.name),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t.icon,{className:"h-5 w-5"}),e.jsx("span",{children:y[t.name]})]}),n(t.name)&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:S(t.name)})]},t.name))},s))}),o.resource&&e.jsx("p",{className:"text-sm text-destructive",children:o.resource})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(b,{htmlFor:"quantity",children:"Quantity"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(F,{value:[r.quantity],onValueChange:q,min:1,max:100,step:1,className:"my-4",disabled:!r.resource||n(r.resource)}),e.jsx(z,{type:"number",value:r.quantity,onChange:s=>f("quantity",parseInt(s.target.value)),min:"1",max:100,disabled:!r.resource||n(r.resource)})]}),o.quantity&&e.jsx("p",{className:"text-sm text-destructive",children:o.quantity})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm items-center",children:[e.jsx("span",{children:"Total Cost:"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"h-4 w-4"}),O(r.resource,r.quantity)," coins"]})]}),e.jsxs("div",{className:"flex justify-between text-sm items-center",children:[e.jsx("span",{children:"Amount:"}),e.jsxs("span",{className:"flex items-center gap-1",children:[r.resource&&(()=>{var t,g;const s=Object.keys(l).find(p=>l[p].some(I=>I.name===r.resource)),a=(g=(t=l[s])==null?void 0:t.find(p=>p.name===r.resource))==null?void 0:g.icon;return a&&e.jsx(a,{className:"h-4 w-4"})})(),T(r.resource,r.quantity)," ",y[r.resource]]})]})]}),e.jsx(P,{type:"submit",className:"w-full",disabled:x||!r.resource||n(r.resource),children:x?"Processing...":"Purchase"})]})})]}),e.jsx(U,{open:C,onOpenChange:d,children:e.jsxs($,{children:[e.jsxs(K,{children:[e.jsx(Q,{children:D==="error"?e.jsxs("div",{className:"flex items-center",children:[e.jsx(J,{className:"h-6 w-6 text-red-500 mr-2"}),"Error"]}):e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{className:"h-6 w-6 text-green-500 mr-2"}),"Success"]})}),e.jsx(X,{children:w})]}),e.jsx(Y,{children:e.jsx(G,{onClick:()=>d(!1),children:"OK"})})]})})]})}export{Se as default};
