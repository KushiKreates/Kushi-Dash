import{q as d,r as u,j as e,m as h}from"./app-CPOEIljs.js";import{C as y,a as k,b as N,d as C}from"./card-Bgh2vyw6.js";import{B as D}from"./button-eEqjswbG.js";import{I as l}from"./input-DblQC-rj.js";import{L as o}from"./label-DOv-fn02.js";import{A,a as S,b as E,c as F,d as B,e as w,f as Y}from"./alert-dialog-CT-B0vup.js";import{X as p}from"./x-K1isOsV0.js";import{C as M}from"./circle-check-big-CmwaXFOD.js";import"./utils-BM_CldAA.js";import"./index-B2vZC__5.js";import"./index-B7zntmxJ.js";import"./index-Cz6_P-h8.js";import"./index-ChuBIvQJ.js";import"./createLucideIcon-qc0XlodV.js";const $=()=>{const{server:a,auth:r}=d().props,{status:n}=d().props.flash,[m,t]=u.useState(null),[s,x]=u.useState({memory:a.limits.memory,cpu:a.limits.cpu,disk:a.limits.disk,databases:a.feature_limits.databases,allocations:a.feature_limits.allocations,backups:a.feature_limits.backups});console.log(r.user.limits);const i=c=>{const{name:f,value:v}=c.target;x(g=>({...g,[f]:v}))},j=()=>Number(s.memory)>r.user.limits.memory?(t("You don't have enough Memory resources"),!1):Number(s.cpu)>r.user.limits.cpu?(t("You don't have enough CPU resources"),!1):Number(s.disk)>r.user.limits.disk?(t("You don't have enough Disk resources"),!1):Number(s.databases)>r.user.limits.databases?(t("You don't have enough Database allocations"),!1):Number(s.allocations)>r.user.limits.allocations?(t("You don't have enough Port allocations"),!1):Number(s.backups)>r.user.limits.backups?(t("You don't have enough Backup slots"),!1):!0,b=c=>{c.preventDefault(),j()&&h.post(`/server/${a.id}/update`,s)};return e.jsxs(y,{className:"ml-0 mr-auto w-full md:w-[600px]",children:[e.jsx(k,{children:e.jsx(N,{children:"Edit Server Resources"})}),e.jsxs(C,{children:[(n||m)&&e.jsx(A,{open:!0,children:e.jsxs(S,{children:[e.jsxs(E,{children:[e.jsx(F,{children:m?e.jsxs("div",{className:"flex items-center",children:[e.jsx(p,{className:"h-6 w-6 text-red-500 mr-2"}),"Error"]}):n.startsWith("Success")?e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"h-6 w-6 text-green-500 mr-2"}),"Success"]}):e.jsxs("div",{className:"flex items-center",children:[e.jsx(p,{className:"h-6 w-6 text-red-500 mr-2"}),"Error"]})}),e.jsx(B,{children:m||n})]}),e.jsx(w,{children:e.jsx(Y,{onClick:()=>{t(null),n&&h.reload()},children:"OK"})})]})}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"memory",children:"Memory (MB)"}),e.jsx(l,{id:"memory",type:"number",name:"memory",value:s.memory,onChange:i})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"cpu",children:"CPU (%)"}),e.jsx(l,{id:"cpu",type:"number",name:"cpu",value:s.cpu,onChange:i})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"disk",children:"Disk (MB)"}),e.jsx(l,{id:"disk",type:"number",name:"disk",value:s.disk,onChange:i})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"databases",children:"Databases"}),e.jsx(l,{id:"databases",type:"number",name:"databases",value:s.databases,onChange:i})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"allocations",children:"Allocations"}),e.jsx(l,{id:"allocations",type:"number",name:"allocations",value:s.allocations,onChange:i})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"backups",children:"Backups"}),e.jsx(l,{id:"backups",type:"number",name:"backups",value:s.backups,onChange:i})]})]}),e.jsx(D,{type:"submit",className:"w-full",children:"Update Server"})]})]})]})};export{$ as default};
