import{r as i,W as P,q as $,j as e}from"./app-Dm8cIE4T.js";import{C as g,a as j,d as p,e as u,b as B}from"./card-BcIbXjuy.js";import{S as o}from"./skeleton-ljlAuKWd.js";import{C as H,F as O,a as q}from"./CreateNew-DYTlcdlo.js";import{B as f}from"./button-DgGlTW6a.js";import{A as C,a as w,b as N,c as D,d as E,e as y,g as I,f as S}from"./alert-dialog-DWkt10LR.js";import{L as R}from"./loader-circle-Bkkx-D_Q.js";import{C as V}from"./circle-check-B1MVLKFc.js";import"./utils-BM_CldAA.js";import"./index-C_uji-SS.js";import"./index-DKrXWNRO.js";import"./index-DLTLx8j3.js";import"./index-C_FO5VxW.js";import"./index-BnBCp9FI.js";import"./createLucideIcon-Bdj_7l1A.js";const re=()=>{const[n,d]=i.useState([]),[A,b]=i.useState(!0),[r,l]=i.useState(null),{delete:k,processing:m}=P(),{flash:t}=$().props,[c,v]=i.useState(null),[F,h]=i.useState(!1);i.useEffect(()=>{(async()=>{try{const L=await(await fetch("/admin/api/eggs")).json();d(L)}catch(a){console.error("Error fetching eggs:",a)}finally{b(!1)}})()},[]),i.useEffect(()=>{t.status&&(v({message:t.message,type:t.status}),t.status==="success"&&h(!0))},[t]);const T=async()=>{r&&k(`/admin/api/eggs/${r.id}`,{onSuccess:()=>{l(null),d(n.filter(s=>s.id!==r.id))},onError:()=>{console.error("Failed to delete egg")}})},x=()=>{h(!1)};return A?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mt-3",children:[...Array(6)].map((s,a)=>e.jsxs(g,{children:[e.jsx(j,{children:e.jsx(o,{className:"h-6 w-3/4"})}),e.jsx(p,{children:e.jsx(o,{className:"h-4 w-full mb-2"})}),e.jsx(u,{className:"flex justify-end",children:e.jsx(o,{className:"h-4 w-16"})})]},a))}):n.length===0?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(H,{go:"/admin/eggs/new"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mt-3",children:n.map(s=>e.jsxs(g,{className:"cursor-pointer",onClick:()=>window.location.href=`/admin/egg/edit/${s.id}`,children:[e.jsx(j,{children:e.jsx(B,{children:s.name})}),e.jsxs(p,{children:[e.jsx("p",{children:s.description}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[e.jsx("img",{src:s.icon,alt:s.name,className:"w-8 h-8"}),e.jsx("span",{children:s.EggID})]})]}),e.jsxs(u,{className:"flex justify-between",children:[e.jsxs(f,{variant:"link",onClick:a=>{a.stopPropagation(),window.location.href=`/admin/egg/edit/${s.id}`},children:["Edit ",e.jsx(O,{className:"ml-2","aria-hidden":"true"})]}),e.jsxs(f,{variant:"destructive",onClick:a=>{a.stopPropagation(),l(s)},children:["Delete ",e.jsx(q,{className:"ml-2","aria-hidden":"true"})]})]})]},s.id))}),e.jsx(C,{open:!!r,onOpenChange:()=>l(null),children:e.jsxs(w,{children:[e.jsxs(N,{children:[e.jsx(D,{children:"Are you sure?"}),e.jsxs(E,{children:["This action cannot be undone. This will permanently delete ",r==null?void 0:r.name,"."]})]}),e.jsxs(y,{children:[e.jsx(I,{onClick:()=>l(null),children:"Cancel"}),e.jsx(S,{onClick:T,className:"bg-red-600 hover:bg-red-700",disabled:m,children:m?e.jsx(R,{className:"mr-2 h-4 w-4 animate-spin"}):"Delete"})]})]})}),e.jsx(C,{open:F,onOpenChange:x,children:e.jsxs(w,{className:"max-w-md",children:[e.jsxs(N,{children:[e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-6 w-6 text-green-500"}),"Success!"]}),e.jsx(E,{className:"text-base",children:(c==null?void 0:c.message)||"Egg deleted successfully!"})]}),e.jsx(y,{children:e.jsx(S,{onClick:x,children:"Continue"})})]})})]})};export{re as default};
