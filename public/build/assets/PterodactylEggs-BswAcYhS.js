import{W as N,q as C,r as d,j as e}from"./app-CKfLfX7q.js";import{C as E,a as D,b as I,c as _,d as U}from"./card-DBUGTJ36.js";import{B as w}from"./button-CnTWfQKJ.js";import{I as o}from"./input-C5bipNaD.js";import{A,a as F,L as c,T as u,b as L,c as S,d as k,e as T,f as R,g as P,h as $}from"./alert-dialog-DQBI050y.js";import{c as j}from"./createLucideIcon-fgWOF6mL.js";import"./utils-BM_CldAA.js";import"./index-CgvnWWHh.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=j("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=j("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Q=({egg:t={}})=>{const{data:r,setData:i,post:v,put:b,processing:m,errors:a,reset:h}=N({name:t.name||"",description:t.description||"",EggID:t.EggID||"",imageUrl:t.imageUrl||"",icon:t.icon||"",additional_environmental_variables:t.additional_environmental_variables||[]}),{flash:n}=C().props,[l,g]=d.useState(null),[f,p]=d.useState(!1);d.useEffect(()=>{if(console.log("Flash object:",n),n.status)if(g({message:n.res,type:n.status}),n.status==="success")p(!0);else{const s=setTimeout(()=>g(null),5e3);return()=>clearTimeout(s)}},[n]);const y=async s=>{if(s.preventDefault(),!/^\d+$/.test(r.EggID)){alert("Pterodactyl Egg ID must be an integer.");return}if(r.imageUrl&&!/^https:\/\//.test(r.imageUrl)){alert("Image URL must start with https.");return}if(r.icon&&!/^https:\/\//.test(r.icon)){alert("Icon URL must start with https.");return}if(!Array.isArray(r.additional_environmental_variables)){alert("Additional Environmental Variables must be an array.");return}try{t.id?await b(`/admin/eggs/${t.id}`):await v("/admin/eggs/store"),h()}catch{console.error("An error occurred while submitting the form.")}},x=()=>{p(!1),t.id||h()};return e.jsxs(e.Fragment,{children:[e.jsxs(E,{className:"w-full max-w-2xl mx-auto",children:[e.jsxs(D,{children:[e.jsx(I,{children:t.id?"Update Egg":"Create New Egg"}),e.jsx(_,{children:t.id?"Update the details for this egg configuration":"Please note that, the egg must be configured in Pterodactyl panel before creating it here. If the egg has any errors it will result in problems as well!"})]}),e.jsxs(U,{children:[l&&l.type!=="success"&&e.jsx(A,{variant:"destructive",className:"mb-6",children:e.jsx(F,{children:l.message})}),e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"name",children:"Name"}),e.jsx(o,{id:"name",type:"text",value:r.name,onChange:s=>i("name",s.target.value),placeholder:"Enter egg name",className:a.name?"border-red-500":""}),a.name&&e.jsx("p",{className:"text-sm text-red-500",children:a.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"description",children:"Description"}),e.jsx(u,{id:"description",value:r.description,onChange:s=>i("description",s.target.value),placeholder:"Enter egg description",className:`min-h-[100px] ${a.description?"border-red-500":""}`}),a.description&&e.jsx("p",{className:"text-sm text-red-500",children:a.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"eggId",children:"Pterodactyl Egg ID"}),e.jsx(o,{id:"eggId",type:"text",value:r.EggID,onChange:s=>i("EggID",s.target.value),placeholder:"Enter egg ID",className:a.EggID?"border-red-500":""}),a.EggID&&e.jsx("p",{className:"text-sm text-red-500",children:a.EggID})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"imageUrl",children:"Image"}),e.jsx(o,{id:"imageUrl",type:"text",value:r.imageUrl,onChange:s=>i("imageUrl",s.target.value),placeholder:"Enter image URL",className:a.imageUrl?"border-red-500":""}),a.imageUrl&&e.jsx("p",{className:"text-sm text-red-500",children:a.imageUrl})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"icon",children:"Icon"}),e.jsx(o,{id:"icon",type:"text",value:r.icon,onChange:s=>i("icon",s.target.value),placeholder:"Enter icon URL",className:a.icon?"border-red-500":""}),a.icon&&e.jsx("p",{className:"text-sm text-red-500",children:a.icon})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"additional_environmental_variables",children:"Additional Environmental Variables"}),e.jsx(u,{id:"additional_environmental_variables",value:(r.additional_environmental_variables||[]).join(`
`),onChange:s=>i("additional_environmental_variables",s.target.value.split(`
`)),placeholder:"Enter additional environmental variables, one per line",className:a.additional_environmental_variables?"border-red-500":""}),a.additional_environmental_variables&&e.jsx("p",{className:"text-sm text-red-500",children:a.additional_environmental_variables})]}),e.jsx(w,{type:"submit",className:"w-full",disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"mr-2 h-4 w-4 animate-spin"}),t.id?"Updating...":"Creating..."]}):t.id?"Update Egg":"Create Egg"})]})]})]}),e.jsx(L,{open:f,onOpenChange:x,children:e.jsxs(S,{className:"max-w-md",children:[e.jsxs(k,{children:[e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-6 w-6 text-green-500"}),"Success!"]}),e.jsx(R,{className:"text-base",children:(l==null?void 0:l.message)||"Egg configuration has been successfully saved!"})]}),e.jsx(P,{children:e.jsx($,{onClick:x,children:"Continue"})})]})})]})};export{Q as default};
