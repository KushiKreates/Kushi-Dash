import{q as x,W as L,r as i,j as e}from"./app-Dm8cIE4T.js";import{C as E,a as _,b as I,c as R,d as y}from"./card-BcIbXjuy.js";import{B as S}from"./button-DgGlTW6a.js";import{I as Y}from"./input-CBzUmVr_.js";import{L as N}from"./label-Cskz7mPN.js";import{A as b,a as w}from"./alert-DHtm6IX7.js";import{A as O,a as U,b as v,c as F,d as K,e as k,f as B}from"./alert-dialog-DWkt10LR.js";import{L as H}from"./loader-circle-Bkkx-D_Q.js";import{C as q}from"./circle-check-B1MVLKFc.js";import"./utils-BM_CldAA.js";import"./index-C_uji-SS.js";import"./index-BnBCp9FI.js";import"./index-DKrXWNRO.js";import"./index-DLTLx8j3.js";import"./index-C_FO5VxW.js";import"./createLucideIcon-Bdj_7l1A.js";function ce(){const{props:h}=x(),{pterodactylSettings:a={}}=h;//console.log (a.PTERODACTYL_API_KEY);const{data:l,setData:A,post:g,processing:n,errors:o,reset:j}=L({PTERODACTYL_API_URL:a.PTERODACTYL_API_URL||"",PTERODACTYL_API_KEY:a.PTERODACTYL_API_KEY||""}),{flash:r}=x().props,[t,m]=i.useState(null),[C,d]=i.useState(!1);i.useEffect(()=>{if(r.status)if(m({message:r.res,type:r.status}),r.status==="success")d(!0);else{const s=setTimeout(()=>m(null),5e3);return()=>clearTimeout(s)}},[r]);const P=async s=>{s.preventDefault();try{await g("/admin/api/update-pterodactyl-settings")}catch{console.error("An error occurred while submitting the form.")}},p=()=>{d(!1),j()},u=(s,c,D,T="text")=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:s,children:c}),e.jsx(Y,{id:s,type:T,value:D,onChange:f=>A(s,f.target.value),placeholder:`Enter ${c.toLowerCase()}`,className:o[s]?"border-red-500":""}),o[s]&&e.jsx("p",{className:"text-xs text-red-500",children:o[s]})]});return e.jsxs(e.Fragment,{children:[e.jsxs(E,{className:"w-full max-w-4xl mx-auto",children:[e.jsxs(_,{children:[e.jsx(I,{children:"Update Pterodactyl Settings"}),e.jsx(R,{children:"Update the Pterodactyl API settings"})]}),e.jsxs(y,{children:[t&&t.type!=="success"&&e.jsx(b,{variant:"destructive",className:"mb-6",children:e.jsx(w,{children:t.message})}),e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[u("PTERODACTYL_API_URL","API URL",l.PTERODACTYL_API_URL,"url"),u("PTERODACTYL_API_KEY","API Key",l.PTERODACTYL_API_KEY,"text")]}),e.jsx(S,{type:"submit",className:"w-full",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Settings"})]})]})]}),e.jsx(O,{open:C,onOpenChange:p,children:e.jsxs(U,{className:"max-w-md",children:[e.jsxs(v,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-6 w-6 text-green-500"}),"Success!"]}),e.jsx(K,{className:"text-base",children:(t==null?void 0:t.message)||"Settings have been successfully updated!"})]}),e.jsx(k,{children:e.jsx(B,{onClick:p,children:"Continue"})})]})})]})}export{ce as default};
