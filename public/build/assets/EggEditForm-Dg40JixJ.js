import{W as D,q as y,r as c,j as e}from"./app-Dm8cIE4T.js";import{C,a as _,b as U,c as A,d as w}from"./card-BcIbXjuy.js";import{B as F}from"./button-DgGlTW6a.js";import{I as d}from"./input-CBzUmVr_.js";import{T as f}from"./textarea-DWp-zq03.js";import{L as n}from"./label-Cskz7mPN.js";import{A as L,a as S}from"./alert-DHtm6IX7.js";import{A as T,a as R,b as $,c as P,d as k,e as B,f as H}from"./alert-dialog-DWkt10LR.js";import{L as V}from"./loader-circle-Bkkx-D_Q.js";import{C as q}from"./circle-check-B1MVLKFc.js";import"./utils-BM_CldAA.js";import"./index-C_uji-SS.js";import"./index-BnBCp9FI.js";import"./index-DKrXWNRO.js";import"./index-DLTLx8j3.js";import"./index-C_FO5VxW.js";import"./createLucideIcon-Bdj_7l1A.js";const ne=({id:m})=>{const{data:t,setData:r,put:b,processing:p,errors:a,reset:h}=D({name:"",description:"",EggID:"",nestId:"",imageUrl:"",icon:"",additional_environmental_variables:[]}),{flash:o}=y().props,[l,x]=c.useState(null),[E,u]=c.useState(!1),[j,I]=c.useState(!0);c.useEffect(()=>{m&&j&&(async()=>{try{const i=await(await fetch(`/client/api/egg/${m}`)).json();r({name:i.name||"",description:i.description||"",EggID:i.EggID||"",nestId:i.nestId||"",imageUrl:i.imageUrl||"",icon:i.icon||"",additional_environmental_variables:i.additional_environmental_variables||[]}),I(!1)}catch(g){console.error("Error fetching egg:",g)}})()},[m,j,r]),c.useEffect(()=>{if(o.status)if(x({message:o.res,type:o.status}),o.status==="success")u(!0);else{const s=setTimeout(()=>x(null),5e3);return()=>clearTimeout(s)}},[o]);const N=async s=>{if(s.preventDefault(),!/^\d+$/.test(t.EggID)){alert("Pterodactyl Egg ID must be an integer.");return}if(t.imageUrl&&!/^https:\/\//.test(t.imageUrl)){alert("Image URL must start with https.");return}if(t.icon&&!/^https:\/\//.test(t.icon)){alert("Icon URL must start with https.");return}if(!Array.isArray(t.additional_environmental_variables)){alert("Additional Environmental Variables must be an array.");return}try{await b(`/admin/eggs/update/${m}`),h()}catch{console.error("An error occurred while submitting the form.")}},v=()=>{u(!1),h()};return e.jsxs(e.Fragment,{children:[e.jsxs(C,{className:"w-full max-w-2xl mx-auto",children:[e.jsxs(_,{children:[e.jsx(U,{children:"Update Egg"}),e.jsx(A,{children:"Update the details for this egg configuration"})]}),e.jsxs(w,{children:[l&&l.type!=="success"&&e.jsx(L,{variant:"destructive",className:"mb-6",children:e.jsx(S,{children:l.message})}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"name",children:"Name"}),e.jsx(d,{id:"name",type:"text",value:t.name,onChange:s=>r("name",s.target.value),placeholder:"Enter egg name",className:a.name?"border-red-500":""}),a.name&&e.jsx("p",{className:"text-sm text-red-500",children:a.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"description",children:"Description"}),e.jsx(f,{id:"description",value:t.description,onChange:s=>r("description",s.target.value),placeholder:"Enter egg description",className:`min-h-[100px] ${a.description?"border-red-500":""}`}),a.description&&e.jsx("p",{className:"text-sm text-red-500",children:a.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"eggId",children:"Pterodactyl Egg ID"}),e.jsx(d,{id:"eggId",type:"text",value:t.EggID,onChange:s=>r("EggID",s.target.value),placeholder:"Enter egg ID",className:a.EggID?"border-red-500":""}),a.EggID&&e.jsx("p",{className:"text-sm text-red-500",children:a.EggID})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"eggId",children:"Pterodactyl Nest ID"}),e.jsx(d,{id:"eggId",type:"text",value:t.nestId,onChange:s=>r("nestId",s.target.value),placeholder:"Enter egg ID",className:a.nestId?"border-red-500":""}),a.EggID&&e.jsx("p",{className:"text-sm text-red-500",children:a.EggID})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"imageUrl",children:"Image"}),e.jsx(d,{id:"imageUrl",type:"text",value:t.imageUrl,onChange:s=>r("imageUrl",s.target.value),placeholder:"Enter image URL",className:a.imageUrl?"border-red-500":""}),a.imageUrl&&e.jsx("p",{className:"text-sm text-red-500",children:a.imageUrl})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"icon",children:"Icon"}),e.jsx(d,{id:"icon",type:"text",value:t.icon,onChange:s=>r("icon",s.target.value),placeholder:"Enter icon URL",className:a.icon?"border-red-500":""}),a.icon&&e.jsx("p",{className:"text-sm text-red-500",children:a.icon})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"additional_environmental_variables",children:"Additional Environmental Variables"}),e.jsx(f,{id:"additional_environmental_variables",value:(t.additional_environmental_variables||[]).join(`
`),onChange:s=>r("additional_environmental_variables",s.target.value.split(`
`)),placeholder:"Enter additional environmental variables, one per line",className:a.additional_environmental_variables?"border-red-500":""}),a.additional_environmental_variables&&e.jsx("p",{className:"text-sm text-red-500",children:a.additional_environmental_variables})]}),e.jsx(F,{type:"submit",className:"w-full",disabled:p,children:p?e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Egg"})]})]})]}),e.jsx(T,{open:E,onOpenChange:v,children:e.jsxs(R,{className:"max-w-md",children:[e.jsxs($,{children:[e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-6 w-6 text-green-500"}),"Success!"]}),e.jsx(k,{className:"text-base",children:(l==null?void 0:l.message)||"Egg configuration has been successfully saved!"})]}),e.jsx(B,{children:e.jsx(H,{onClick:v,children:"Continue"})})]})})]})};export{ne as default};
