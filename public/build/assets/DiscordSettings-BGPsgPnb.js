import{q as C,v as O,r as n,j as s}from"./app-CPOEIljs.js";import{C as j,a as T,b as N,c as f,d as A}from"./card-Bgh2vyw6.js";import{B as L}from"./button-eEqjswbG.js";import{I as b}from"./input-DblQC-rj.js";import{L as v}from"./label-DOv-fn02.js";import{A as U,a as w}from"./alert-B7Y1C_SH.js";import{A as y,a as B,b as F,c as K,d as V,e as k,f as H}from"./alert-dialog-CT-B0vup.js";import{L as q}from"./loader-circle-ChjTYIog.js";import{C as $}from"./circle-check-CubFW-9P.js";import"./utils-BM_CldAA.js";import"./index-B2vZC__5.js";import"./index-B7zntmxJ.js";import"./index-Cz6_P-h8.js";import"./index-ChuBIvQJ.js";import"./createLucideIcon-qc0XlodV.js";function is(){const{props:I}=C(),{discordSettings:a={}}=I,{data:r,setData:p,post:R,processing:l,errors:o,reset:S}=O({DISCORD_CLIENT_ID:a.DISCORD_CLIENT_ID||"",DISCORD_CLIENT_SECRET:a.DISCORD_CLIENT_SECRET||"",DISCORD_REDIRECT_URI:a.DISCORD_REDIRECT_URI||"",DISCORD_SERVER_ID:a.DISCORD_SERVER_ID||"",DISCORD_BOT_TOKEN:a.DISCORD_BOT_TOKEN||""}),{flash:i}=C().props,[t,x]=n.useState(null),[E,D]=n.useState(!1);n.useEffect(()=>{i.status&&(x({message:i.message,type:i.status}),i.status==="success discord"&&D(!0))},[i]);const _=async e=>{e.preventDefault(),R("/admin/api/update-discord-settings")},d=()=>{D(!1),S()},c=(e,m,u,h="text")=>s.jsxs("div",{className:"space-y-2",children:[s.jsx(v,{htmlFor:e,children:m}),s.jsx(b,{id:e,type:h,value:u,onChange:g=>p(e,g.target.value),placeholder:`Enter ${m}`,className:o[e]?"border-red-500":""}),o[e]&&s.jsx("p",{className:"text-xs text-red-500",children:o[e]})]});return s.jsxs(s.Fragment,{children:[s.jsxs(j,{className:"w-full max-w-4xl mx-auto",children:[s.jsxs(T,{children:[s.jsx(N,{children:"Update Discord Settings"}),s.jsx(f,{children:"Configure your Discord integration settings"})]}),s.jsxs(A,{children:[t&&t.type!=="success"&&s.jsx(U,{variant:"destructive",className:"mb-6",children:s.jsx(w,{children:t.message})}),s.jsxs("form",{onSubmit:_,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[c("DISCORD_CLIENT_ID","Client ID",r.DISCORD_CLIENT_ID),c("DISCORD_CLIENT_SECRET","Client Secret",r.DISCORD_CLIENT_SECRET),c("DISCORD_REDIRECT_URI","Redirect URI",r.DISCORD_REDIRECT_URI,"url"),c("DISCORD_SERVER_ID","Server ID",r.DISCORD_SERVER_ID),c("DISCORD_BOT_TOKEN","Bot Token",r.DISCORD_BOT_TOKEN)]}),s.jsx(L,{type:"submit",className:"w-full",disabled:l,children:l?s.jsxs(s.Fragment,{children:[s.jsx(q,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Settings"})]})]})]}),s.jsx(y,{open:E,onOpenChange:d,children:s.jsxs(B,{className:"max-w-md",children:[s.jsxs(F,{children:[s.jsxs(K,{className:"flex items-center gap-2",children:[s.jsx($,{className:"h-6 w-6 text-green-500"}),"Success!"]}),s.jsx(V,{className:"text-base",children:(t==null?void 0:t.message)||"Discord settings have been successfully updated!"})]}),s.jsx(k,{children:s.jsx(H,{onClick:d,children:"Continue"})})]})})]})}export{is as default};
