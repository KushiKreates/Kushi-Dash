import{q as C,W as O,r as n,j as s}from"./app-Dm8cIE4T.js";import{C as j,a as T,b as N,c as f,d as A}from"./card-BcIbXjuy.js";import{B as L}from"./button-DgGlTW6a.js";import{I as b}from"./input-CBzUmVr_.js";import{L as U}from"./label-Cskz7mPN.js";import{A as v,a as w}from"./alert-DHtm6IX7.js";import{A as y,a as B,b as F,c as K,d as V,e as k,f as H}from"./alert-dialog-DWkt10LR.js";import{L as q}from"./loader-circle-Bkkx-D_Q.js";import{C as W}from"./circle-check-B1MVLKFc.js";import"./utils-BM_CldAA.js";import"./index-C_uji-SS.js";import"./index-BnBCp9FI.js";import"./index-DKrXWNRO.js";import"./index-DLTLx8j3.js";import"./index-C_FO5VxW.js";import"./createLucideIcon-Bdj_7l1A.js";function os(){const{props:p}=C(),{discordSettings:r={}}=p,{data:a,setData:I,post:R,processing:l,errors:c,reset:S}=O({DISCORD_CLIENT_ID:r.DISCORD_CLIENT_ID||"",DISCORD_CLIENT_SECRET:r.DISCORD_CLIENT_SECRET||"",DISCORD_REDIRECT_URI:r.DISCORD_REDIRECT_URI||"",DISCORD_SERVER_ID:r.DISCORD_SERVER_ID||"",DISCORD_BOT_TOKEN:r.DISCORD_BOT_TOKEN||""}),{flash:i}=C().props,[t,x]=n.useState(null),[E,D]=n.useState(!1);n.useEffect(()=>{i.status&&(x({message:i.message,type:i.status}),i.status==="success discord"&&D(!0))},[i]);const _=async e=>{e.preventDefault(),R("/admin/api/update-discord-settings")},d=()=>{D(!1),S()},o=(e,m,u,h="text")=>s.jsxs("div",{className:"space-y-2",children:[s.jsx(U,{htmlFor:e,children:m}),s.jsx(b,{id:e,type:h,value:u,onChange:g=>I(e,g.target.value),placeholder:`Enter ${m}`,className:c[e]?"border-red-500":""}),c[e]&&s.jsx("p",{className:"text-xs text-red-500",children:c[e]})]});return s.jsxs(s.Fragment,{children:[s.jsxs(j,{className:"w-full max-w-4xl mx-auto",children:[s.jsxs(T,{children:[s.jsx(N,{children:"Update Discord Settings"}),s.jsx(f,{children:"Configure your Discord integration settings"})]}),s.jsxs(A,{children:[t&&t.type!=="success"&&s.jsx(v,{variant:"destructive",className:"mb-6",children:s.jsx(w,{children:t.message})}),s.jsxs("form",{onSubmit:_,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[o("DISCORD_CLIENT_ID","Client ID",a.DISCORD_CLIENT_ID),o("DISCORD_CLIENT_SECRET","Client Secret",a.DISCORD_CLIENT_SECRET),o("DISCORD_REDIRECT_URI","Redirect URI",a.DISCORD_REDIRECT_URI,"url"),o("DISCORD_SERVER_ID","Server ID",a.DISCORD_SERVER_ID),o("DISCORD_BOT_TOKEN","Bot Token",a.DISCORD_BOT_TOKEN)]}),s.jsx(L,{type:"submit",className:"w-full",disabled:l,children:l?s.jsxs(s.Fragment,{children:[s.jsx(q,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Settings"})]})]})]}),s.jsx(y,{open:E,onOpenChange:d,children:s.jsxs(B,{className:"max-w-md",children:[s.jsxs(F,{children:[s.jsxs(K,{className:"flex items-center gap-2",children:[s.jsx(W,{className:"h-6 w-6 text-green-500"}),"Success!"]}),s.jsx(V,{className:"text-base",children:(t==null?void 0:t.message)||"Discord settings have been successfully updated!"})]}),s.jsx(k,{children:s.jsx(H,{onClick:d,children:"Continue"})})]})})]})}export{os as default};
