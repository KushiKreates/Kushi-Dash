import{r as g,q as T,j as s,y as S}from"./app-Dm8cIE4T.js";import{B}from"./button-DgGlTW6a.js";import{A as L,a as O,b as M,c as Q,d as U,e as q,f as z}from"./alert-dialog-DWkt10LR.js";import{C as F}from"./circle-check-B1MVLKFc.js";import"./index-C_uji-SS.js";import"./utils-BM_CldAA.js";import"./index-DKrXWNRO.js";import"./index-DLTLx8j3.js";import"./index-C_FO5VxW.js";import"./index-BnBCp9FI.js";import"./createLucideIcon-Bdj_7l1A.js";const I=e=>typeof e=="number"&&!isNaN(e),f=e=>typeof e=="string",y=e=>typeof e=="function",H=e=>g.isValidElement(e)||f(e)||y(e)||I(e),l=new Map;let C=[];const w=new Set,N=()=>l.size>0;function P(e,n){var t;if(n)return!((t=l.get(n))==null||!t.isToastActive(e));let o=!1;return l.forEach(i=>{i.isToastActive(e)&&(o=!0)}),o}function R(e,n){H(e)&&(N()||C.push({content:e,options:n}),l.forEach(t=>{t.buildToast(e,n)}))}function b(e,n){l.forEach(t=>{n!=null&&n!=null&&n.containerId?(n==null?void 0:n.containerId)===t.id&&t.toggle(e,n==null?void 0:n.id):t.toggle(e,n==null?void 0:n.id)})}let V=1;const D=()=>""+V++;function W(e){return e&&(f(e.toastId)||I(e.toastId))?e.toastId:D()}function m(e,n){return R(e,n),n.toastId}function v(e,n){return{...n,type:n&&n.type||e,toastId:W(n)}}function h(e){return(n,t)=>m(n,v(e,t))}function r(e,n){return m(e,v("default",n))}r.loading=(e,n)=>m(e,v("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...n})),r.promise=function(e,n,t){let o,{pending:i,error:a,success:c}=n;i&&(o=f(i)?r.loading(i,t):r.loading(i.render,{...t,...i}));const d={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},j=(u,p,A)=>{if(p==null)return void r.dismiss(o);const E={type:u,...d,...t,data:A},x=f(p)?{render:p}:p;return o?r.update(o,{...E,...x}):r(x.render,{...E,...x}),A},k=y(e)?e():e;return k.then(u=>j("success",c,u)).catch(u=>j("error",a,u)),k},r.success=h("success"),r.info=h("info"),r.error=h("error"),r.warning=h("warning"),r.warn=r.warning,r.dark=(e,n)=>m(e,v("default",{theme:"dark",...n})),r.dismiss=function(e){(function(n){var t;if(N()){if(n==null||f(t=n)||I(t))l.forEach(o=>{o.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){const o=l.get(n.containerId);o?o.removeToast(n.id):l.forEach(i=>{i.removeToast(n.id)})}}else C=C.filter(o=>n!=null&&o.options.toastId!==n)})(e)},r.clearWaitingQueue=function(e){e===void 0&&(e={}),l.forEach(n=>{!n.props.limit||e.containerId&&n.id!==e.containerId||n.clearQueue()})},r.isActive=P,r.update=function(e,n){n===void 0&&(n={});const t=((o,i)=>{var a;let{containerId:c}=i;return(a=l.get(c||1))==null?void 0:a.toasts.get(o)})(e,n);if(t){const{props:o,content:i}=t,a={delay:100,...o,...n,toastId:n.toastId||e,updateId:D()};a.toastId!==e&&(a.staleId=e);const c=a.render||i;delete a.render,m(c,a)}},r.done=e=>{r.update(e,{progress:1})},r.onChange=function(e){return w.add(e),()=>{w.delete(e)}},r.play=e=>b(!0,e),r.pause=e=>b(!1,e);function te(){const{flash:e,linkvertiseEnabled:n}=T().props,[t,o]=g.useState(!1),[i,a]=g.useState(0);g.useEffect(()=>{if(e.success){const d=e.success.match(/You have earned (\d+) coins!/);d&&d[1]&&(a(d[1]),o(!0))}e.error&&r.error(e.error),e.linkvertiseUrl&&(window.location.href=e.linkvertiseUrl)},[e]);const c=()=>{S.post(route("generate.linkvertise"),{},{onError:()=>{r.error("An error occurred while generating the Linkvertise link.")}})};return s.jsxs("div",{className:"container mx-auto py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Earn Coins"}),e.success&&s.jsx("div",{className:"alert alert-success",children:e.success}),e.error&&s.jsx("div",{className:"alert alert-error",children:e.error}),s.jsx("p",{className:"mb-6",children:"Click the button below to earn coins through Linkvertise."}),n?s.jsx(B,{onClick:c,children:"Earn Coins"}):s.jsx("p",{children:"Linkvertise is currently disabled."}),s.jsx(L,{open:t,onOpenChange:o,children:s.jsxs(O,{className:"max-w-md",children:[s.jsxs(M,{children:[s.jsxs(Q,{className:"flex items-center gap-2",children:[s.jsx(F,{className:"h-6 w-6 text-green-500"}),"Success!"]}),s.jsxs(U,{className:"text-base",children:["Coins ",s.jsx("strong",{children:i})," claimed successfully."]})]}),s.jsx(q,{children:s.jsx(z,{onClick:()=>o(!1),children:"Continue"})})]})})]})}export{te as default};
