import{q as x,v as L,r as c,j as e}from"./app-CPOEIljs.js";import{C as E,a as _,b as y,c as I,d as R}from"./card-Bgh2vyw6.js";import{B as S}from"./button-eEqjswbG.js";import{I as N}from"./input-DblQC-rj.js";import{L as Y}from"./label-DOv-fn02.js";import{A as b,a as w}from"./alert-B7Y1C_SH.js";import{A as U,a as v,b as O,c as F,d as K,e as k,f as B}from"./alert-dialog-CT-B0vup.js";import{L as H}from"./loader-circle-ChjTYIog.js";import{C as q}from"./circle-check-CubFW-9P.js";import"./utils-BM_CldAA.js";import"./index-B2vZC__5.js";import"./index-B7zntmxJ.js";import"./index-Cz6_P-h8.js";import"./index-ChuBIvQJ.js";import"./createLucideIcon-qc0XlodV.js";function oe(){const{props:h}=x(),{pterodactylSettings:i={}}=h,{data:l,setData:g,post:A,processing:n,errors:r,reset:j}=L({PTERODACTYL_API_URL:i.PTERODACTYL_API_URL||"",PTERODACTYL_API_KEY:i.PTERODACTYL_API_KEY||""}),{flash:a}=x().props,[t,m]=c.useState(null),[C,d]=c.useState(!1);c.useEffect(()=>{if(a.status)if(m({message:a.res,type:a.status}),a.status==="success")d(!0);else{const s=setTimeout(()=>m(null),5e3);return()=>clearTimeout(s)}},[a]);const D=async s=>{s.preventDefault();try{await A("/admin/api/update-pterodactyl-settings")}catch{console.error("An error occurred while submitting the form.")}},p=()=>{d(!1),j()},u=(s,o,P,f="text")=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:s,children:o}),e.jsx(N,{id:s,type:f,value:P,onChange:T=>g(s,T.target.value),placeholder:`Enter ${o.toLowerCase()}`,className:r[s]?"border-red-500":""}),r[s]&&e.jsx("p",{className:"text-xs text-red-500",children:r[s]})]});return e.jsxs(e.Fragment,{children:[e.jsxs(E,{className:"w-full max-w-4xl mx-auto",children:[e.jsxs(_,{children:[e.jsx(y,{children:"Update Pterodactyl Settings"}),e.jsx(I,{children:"Update the Pterodactyl API settings"})]}),e.jsxs(R,{children:[t&&t.type!=="success"&&e.jsx(b,{variant:"destructive",className:"mb-6",children:e.jsx(w,{children:t.message})}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[u("PTERODACTYL_API_URL","API URL",l.PTERODACTYL_API_URL,"url"),u("PTERODACTYL_API_KEY","API Key",l.PTERODACTYL_API_KEY,"text")]}),e.jsx(S,{type:"submit",className:"w-full",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Settings"})]})]})]}),e.jsx(U,{open:C,onOpenChange:p,children:e.jsxs(v,{className:"max-w-md",children:[e.jsxs(O,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(q,{className:"h-6 w-6 text-green-500"}),"Success!"]}),e.jsx(K,{className:"text-base",children:(t==null?void 0:t.message)||"Settings have been successfully updated!"})]}),e.jsx(k,{children:e.jsx(B,{onClick:p,children:"Continue"})})]})})]})}export{oe as default};
