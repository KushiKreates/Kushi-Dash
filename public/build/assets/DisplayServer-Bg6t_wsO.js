import{q as i,r,v as q,b as F,j as e}from"./app-CPOEIljs.js";import{C as g,a as C,d as j,e as E}from"./card-Bgh2vyw6.js";import{B as d}from"./button-eEqjswbG.js";import{S as f}from"./skeleton-DDZJlF55.js";import{A as H,a as Y,b as O,c as V,d as G,e as J,g as K,f as Q}from"./alert-dialog-CT-B0vup.js";import{c as A}from"./createLucideIcon-qc0XlodV.js";import{T as W}from"./trash-2-CPs3r17f.js";import"./utils-BM_CldAA.js";import"./index-B2vZC__5.js";import"./index-B7zntmxJ.js";import"./index-Cz6_P-h8.js";import"./index-ChuBIvQJ.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=A("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=A("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);function he({className:v=""}){const o=i().props.auth.user,[m,$]=r.useState([]),[L,P]=r.useState({}),[z,b]=r.useState(!0),[y,n]=r.useState(null),[N,h]=r.useState(!1),{post:M,delete:T}=q(),{status:k}=i().props;r.useState(!!k);const{pterodactyl_URL:w}=i().props;console.log(k),console.log(i().props),r.useEffect(()=>{U().then(S)},[]);const U=async()=>{try{const s=await F.get(`/pterodactyl/servers/${o.pterodactyl_id}`);console.warn(s.data.data.servers)}catch(s){console.error("Error hot reloading API:",s)}},_=s=>{h(!0),T(`/pterodactyl/servers/${s}/delete`,{onSuccess:()=>{h(!1),n(null),S()},onError:()=>{h(!1),n(null)}})},B=s=>{const a=`/dashboard/servers/edit/${s}`;window.open(a,"_blank")},I=async s=>{try{const t=await(await fetch(`/client/api/pterodactyl/egg/${s}`)).json();P(p=>({...p,[s]:t}))}catch(a){console.error("Error fetching egg data:",a)}},S=()=>{M(`/pterodactyl/servers/${o.pterodactyl_id}`,{preserveScroll:!0,onSuccess:s=>{s.props.flash.res&&($(s.props.flash.res),s.props.flash.res.forEach(a=>{I(a.attributes.egg)})),b(!1)},onError:()=>{b(!1)}})},R=()=>{if(!w){console.error("Pterodactyl URL is not defined.");return}const s=`${w}`;window.open(s,"_blank")};return z?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mt-5",children:[...Array(6)].map((s,a)=>e.jsxs(g,{children:[e.jsx(C,{children:e.jsx(f,{className:"h-6 w-26"})}),e.jsx(j,{children:e.jsx(f,{className:"h-4 w-full mb-2"})}),e.jsx(E,{className:"flex justify-end",children:e.jsx(f,{className:"h-4 w-16"})})]},a))}):!m||m.length===0?e.jsx("div",{className:"mt-6",children:e.jsx(g,{children:e.jsxs(j,{className:"p-6 flex flex-col items-center justify-center space-y-4",children:[e.jsx("img",{src:"/Empty-pana.svg",alt:"No Servers",className:"w-80 h-80"}),e.jsx("p",{className:"text-muted-foreground text-lg font-medium",children:"You don't have any servers yet"}),e.jsx(d,{variant:"default",className:"dark:bg-white bg-black",onClick:()=>window.location.href="/deploy",children:"Create Your First Server"})]})})}):e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 mt-3",children:[m.map(s=>{const{attributes:a}=s,t=L[a.egg],{status:p,suspended:D,limits:x,feature_limits:u}=a;let c="";return p==="installing"?c="opacity-20":c="",e.jsxs(g,{className:`overflow-hidden group relative ${c}`,style:{backgroundImage:t!=null&&t.imageUrl?`linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.9)), url(${t.imageUrl})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[D&&e.jsxs("div",{className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center gap-2 z-10",children:[e.jsx("img",{src:"/suspended.png",alt:"Suspended Clock",className:"w-24 h-24"}),e.jsx("p",{className:"text-white font-semibold",children:"Server Suspended"}),e.jsx("p",{className:"text-white text-sm font-thin",children:"Please contact Support"})]}),e.jsxs(C,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[(t==null?void 0:t.icon)&&e.jsx("img",{src:t.icon,alt:"",className:"w-8 h-8 rounded-full"}),e.jsx("h3",{className:"text-lg font-semibold text-white truncate",children:a.name})]}),a.description&&e.jsx("p",{className:"text-sm text-gray-300 line-clamp-2",children:a.description})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),e.jsxs("span",{className:"text-sm text-gray-300",children:["Location ",a.node]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(l,{label:"Memory",value:`${x.memory} MB`}),e.jsx(l,{label:"CPU",value:`${x.cpu}%`}),e.jsx(l,{label:"Storage",value:`${x.disk} MB`}),e.jsx(l,{label:"Ports",value:u.allocations}),e.jsx(l,{label:"Backups",value:u.backups}),e.jsx(l,{label:"Databases",value:u.databases})]})]}),e.jsxs(E,{className:"justify-end space-x-2 bg-black/50 backdrop-blur-sm",children:[e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>B(a.id),children:e.jsx(Z,{className:"h-4 w-4"})}),e.jsx(d,{variant:"ghost",size:"icon",onClick:R,children:e.jsx(X,{className:"h-4 w-4"})}),e.jsx(d,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:()=>n(a.id),children:e.jsx(W,{className:"h-4 w-4"})})]})]},a.uuid)}),e.jsx(H,{open:!!y,onOpenChange:()=>n(null),children:e.jsxs(Y,{children:[e.jsxs(O,{children:[e.jsx(V,{children:"Are you sure?"}),e.jsx(G,{children:"This action cannot be undone. This will permanently delete your server."})]}),e.jsxs(J,{children:[e.jsx(K,{children:"Cancel"}),e.jsx(Q,{onClick:()=>_(y),className:"bg-red-600 hover:bg-red-700",disabled:N,children:N?"Deleting...":"Delete Server"})]})]})})]})}const l=({label:v,value:o})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-400",children:v}),e.jsx("span",{className:"text-sm font-medium text-white",children:o})]});export{he as default};
