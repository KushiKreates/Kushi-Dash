import{q as u,r,W as R,b as q,j as e}from"./app-Dm8cIE4T.js";import{C as g,a as C,d as j,e as A}from"./card-BcIbXjuy.js";import{B as d}from"./button-DgGlTW6a.js";import{S as f}from"./skeleton-ljlAuKWd.js";import{A as H,a as F,b as V,c as Y,d as O,e as W,g as G,f as J}from"./alert-dialog-DWkt10LR.js";import{c as v}from"./createLucideIcon-Bdj_7l1A.js";import"./utils-BM_CldAA.js";import"./index-C_uji-SS.js";import"./index-DKrXWNRO.js";import"./index-DLTLx8j3.js";import"./index-C_FO5VxW.js";import"./index-BnBCp9FI.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=v("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=v("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=v("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function me({className:y=""}){const c=u().props.auth.user,[n,E]=r.useState([]),[M,$]=r.useState({}),[L,b]=r.useState(!0),[N,o]=r.useState(null),[k,m]=r.useState(!1),{post:P,delete:z}=R(),{status:T}=u().props;r.useState(!!T);const{pterodactyl_URL:w}=u().props;r.useEffect(()=>{U().then(S)},[]);const U=async()=>{try{const s=await q.get(`/pterodactyl/servers/${c.pterodactyl_id}`);console.warn(s.data.data.servers)}catch(s){console.error("Error hot reloading API:",s)}},_=s=>{m(!0),z(`/pterodactyl/servers/${s}/delete`,{onSuccess:()=>{m(!1),o(null),S()},onError:()=>{m(!1),o(null)}})},B=async s=>{try{const t=await(await fetch(`/client/api/pterodactyl/egg/${s}`)).json();$(x=>({...x,[s]:t}))}catch(a){console.error("Error fetching egg data:",a)}},S=()=>{P(`/pterodactyl/servers/${c.pterodactyl_id}`,{preserveScroll:!0,onSuccess:s=>{s.props.flash.res&&(E(s.props.flash.res),s.props.flash.res.forEach(a=>{B(a.attributes.egg)})),b(!1)},onError:()=>{b(!1)}})},I=()=>{if(!w){console.error("Pterodactyl URL is not defined.");return}const s=`${w}`;//console.log (n.identifier),window.open(s,"_blank")};return L?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mt-3",children:[...Array(6)].map((s,a)=>e.jsxs(g,{children:[e.jsx(C,{children:e.jsx(f,{className:"h-6 w-36"})}),e.jsx(j,{children:e.jsx(f,{className:"h-4 w-full mb-2"})}),e.jsx(A,{className:"flex justify-end",children:e.jsx(f,{className:"h-4 w-16"})})]},a))}):!n||n.length===0?e.jsx("div",{className:"mt-6",children:e.jsx(g,{children:e.jsxs(j,{className:"p-6 flex flex-col items-center justify-center space-y-4",children:[e.jsx("img",{src:"/Empty-pana.svg",alt:"No Servers",className:"w-80 h-80"}),e.jsx("p",{className:"text-muted-foreground text-lg font-medium",children:"You don't have any servers yet"}),e.jsx(d,{variant:"default",className:"dark:bg-white bg-black",onClick:()=>window.location.href="/deploy",children:"Create Your First Server"})]})})}):e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 mt-3",children:[n.map(s=>{const{attributes:a}=s,t=M[a.egg],{status:x,suspended:D,limits:h,feature_limits:p}=a;let i="";return x==="installing"?i="opacity-20":i="",e.jsxs(g,{className:`overflow-hidden group relative ${i}`,style:{backgroundImage:t!=null&&t.imageUrl?`linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.9)), url(${t.imageUrl})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[D&&e.jsxs("div",{className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center gap-2 z-10",children:[e.jsx("img",{src:"/suspended.png",alt:"Suspended Clock",className:"w-24 h-24"}),e.jsx("p",{className:"text-white font-semibold",children:"Server Suspended"}),e.jsx("p",{className:"text-white text-sm font-thin",children:"Please contact Support"})]}),e.jsxs(C,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[(t==null?void 0:t.icon)&&e.jsx("img",{src:t.icon,alt:"",className:"w-8 h-8 rounded-full"}),e.jsx("h3",{className:"text-lg font-semibold text-white truncate",children:a.name})]}),a.description&&e.jsx("p",{className:"text-sm text-gray-300 line-clamp-2",children:a.description})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),e.jsxs("span",{className:"text-sm text-gray-300",children:["Node ",a.node]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(l,{label:"Memory",value:`${h.memory} MB`}),e.jsx(l,{label:"CPU",value:`${h.cpu}%`}),e.jsx(l,{label:"Storage",value:`${h.disk} MB`}),e.jsx(l,{label:"Ports",value:p.allocations}),e.jsx(l,{label:"Backups",value:p.backups}),e.jsx(l,{label:"Databases",value:p.databases})]})]}),e.jsxs(A,{className:"justify-end space-x-2 bg-black/50 backdrop-blur-sm",children:[e.jsx(d,{variant:"ghost",size:"icon",children:e.jsx(Q,{className:"h-4 w-4"})}),e.jsx(d,{variant:"ghost",size:"icon",onClick:I,children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx(d,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:()=>o(a.id),children:e.jsx(X,{className:"h-4 w-4"})})]})]},a.uuid)}),e.jsx(H,{open:!!N,onOpenChange:()=>o(null),children:e.jsxs(F,{children:[e.jsxs(V,{children:[e.jsx(Y,{children:"Are you sure?"}),e.jsx(O,{children:"This action cannot be undone. This will permanently delete your server."})]}),e.jsxs(W,{children:[e.jsx(G,{children:"Cancel"}),e.jsx(J,{onClick:()=>_(N),className:"bg-red-600 hover:bg-red-700",disabled:k,children:k?"Deleting...":"Delete Server"})]})]})})]})}const l=({label:y,value:c})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-400",children:y}),e.jsx("span",{className:"text-sm font-medium text-white",children:c})]});export{me as default};
