import{q as S,r as l,W as M,b as C,j as e}from"./app-CKfLfX7q.js";import{C as u,d as f,a as L,e as z}from"./card-DBUGTJ36.js";import{B as d}from"./button-CnTWfQKJ.js";import{c as x}from"./createLucideIcon-fgWOF6mL.js";import"./utils-BM_CldAA.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=x("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=x("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=x("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function U({className:g=""}){const m=S().props.auth.user,[r,j]=l.useState(null),[y,N]=l.useState({}),[v,h]=l.useState(!0),{post:b}=M();l.useEffect(()=>{k().then(E)},[]);const k=async()=>{try{await C.get(`/pterodactyl/servers/${m.pterodactyl_id}`)}catch(t){console.error("Error hot reloading API:",t)}},w=async t=>{try{const a=await(await fetch(`/client/api/egg/${t}`)).json();N(i=>({...i,[t]:a}))}catch(s){console.error("Error fetching egg data:",s)}},E=()=>{b(`/pterodactyl/servers/${m.pterodactyl_id}`,{preserveScroll:!0,onSuccess:t=>{t.props.flash.servers&&(j(t.props.flash.servers),Object.values(t.props.flash.servers.servers).forEach(s=>{w(s.attributes.egg)})),h(!1)},onError:()=>{h(!1)}})};return v?e.jsx("div",{className:`min-h-[200px] flex items-center justify-center ${g}`,children:e.jsxs("div",{className:"space-y-4 text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading your servers..."})]})}):!(r!=null&&r.servers)||Object.keys(r.servers).length===0?e.jsx(u,{children:e.jsx(f,{className:"p-6 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No servers found"})})}):e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 mt-3",children:Object.entries(r.servers).map(([t,s])=>{const a=y[s.attributes.egg],{status:i,suspended:p,limits:n,feature_limits:o}=s.attributes;let c="";return i==="installing"?c="bg-yellow-500":p?c="bg-red-500":c="bg-green-500",e.jsxs(u,{className:`overflow-hidden group relative ${c}`,style:{backgroundImage:a!=null&&a.imageUrl?`linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.9)), url(${a.imageUrl})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[p&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-10",children:e.jsx("p",{className:"text-white font-semibold",children:"Server Suspended"})}),e.jsxs(L,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[(a==null?void 0:a.icon)&&e.jsx("img",{src:a.icon,alt:"",className:"w-8 h-8 rounded-full"}),e.jsx("h3",{className:"text-lg font-semibold text-white truncate",children:s.attributes.name})]}),s.attributes.description&&e.jsx("p",{className:"text-sm text-gray-300 line-clamp-2",children:s.attributes.description})]}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),e.jsxs("span",{className:"text-sm text-gray-300",children:["Node ",s.attributes.node]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Memory"}),e.jsxs("span",{className:"text-sm font-medium text-white",children:[n.memory," MB"]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"CPU"}),e.jsxs("span",{className:"text-sm font-medium text-white",children:[n.cpu,"%"]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Storage"}),e.jsxs("span",{className:"text-sm font-medium text-white",children:[n.disk," MB"]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Ports"}),e.jsx("span",{className:"text-sm font-medium text-white",children:o.allocations})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Backups"}),e.jsx("span",{className:"text-sm font-medium text-white",children:o.backups})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-400",children:"Databases"}),e.jsx("span",{className:"text-sm font-medium text-white",children:o.databases})]})]})]}),e.jsxs(z,{className:"justify-end space-x-2 bg-black/50 backdrop-blur-sm opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(d,{variant:"ghost",size:"icon",children:e.jsx($,{className:"h-4 w-4"})}),e.jsx(d,{variant:"ghost",size:"icon",children:e.jsx(P,{className:"h-4 w-4"})}),e.jsx(d,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",children:e.jsx(B,{className:"h-4 w-4"})})]})]},t)})})}export{U as default};
